---
description: 新しい機能開発用のGit Worktreeを作成し、初期セットアップを行う手順
---

# 新規Worktree作成フロー

新しい機能を開発する際に、独立した作業ディレクトリ（Worktree）を作成する手順です。

1. **ディレクトリ名とブランチ名の決定**
   - ディレクトリ名は `../feature-<機能名>` のように、親ディレクトリ（PolySeek-v2）の直下に作成することを推奨します。
   - ブランチ名は `feature/<機能名>` や `fix/<問題名>` とします。

2. **Worktreeの作成**
   - 以下のコマンドを実行します。

   ```bash
   git worktree add ../<ディレクトリ名> -b <ブランチ名>
   ```

   - ※ 既存ブランチをチェックアウトする場合は `-b` を外してください。

3. **環境設定のコピー**
   - 現在のディレクトリにある `.env` ファイルを新環境にコピーします。

   ```bash
   cp .env ../<ディレクトリ名>/
   ```

   - 必要に応じて `.local/` などのローカル設定フォルダもコピーします。

4. **依存関係のインストール**
   - 新しいディレクトリに移動し、パッケージをインストールします。

   ```bash
   cd ../<ディレクトリ名>
   npm install
   ```

5. **Antigravityの起動（新しいWorktreeディレクトリをルートとしてエディタを開く）**
   - 新しいディレクトリをルートとして、エディタ（VS Code等）を開き直してください。

6. **Worktreeのクリーンアップ（作業終了後）**
   - 作業が完了し、不要になったWorktreeは以下の手順で削除します。

   ```bash
   # メインのディレクトリに戻る
   cd ../booth-auto-scraping

   # Worktreeの登録を削除
   git worktree remove ../<ディレクトリ名>

   # （必要であれば）作業用ディレクトリを完全に削除
   rm -rf ../<ディレクトリ名>

   # 作業用ブランチを削除（マージ済みの場合）
   git branch -d <ブランチ名>

   # マージされていないが強制削除する場合
   # git branch -D <ブランチ名>
   ```
