---
description: CodeRabbitのレビューコメントを自動修正するワークフロー
---

ユーザーからPR番号（例: PR#123）が提供された場合、以下の手順を実行してください。

1. **PR情報の取得**
   - 提供されたPR番号を使用して、`github-mcp-server` の `pull_request_read` ツール（method: `get_review_comments`）を呼び出し、レビューコメントの一覧とリアクション情報を取得します。
   - 取得したコメントの中から、以下の条件を満たすものをフィルタリングします：
     - `reactions` フィールドに `"+1"`（👍）が含まれていないこと（`"+1": 0` またはフィールドが存在しない）。
     - 既に解決済み（resolved）でないこと。
   - フィルタリングされたコメントの中から、優先度の高いものを1つ選択します。もし全てのコメントに👍がついている場合は、ユーザーに「未解決のコメントはありません」と報告して終了します。

2. **詳細情報の取得**
   - 選択したコメントのIDを使用して、`mcp0_get_comment_details` ツールを呼び出し、詳細な指摘内容とAIによる修正提案を取得します。

3. **タスクの構築**
   - `task_boundary` ツールを使用して、修正タスクを開始します。
     - TaskName: CodeRabbit指摘の修正 (PR#xxx)
     - TaskSummary: コメントID xxx の指摘「[指摘の要約]」を修正します。
     - Mode: EXECUTION

4. **修正の実施**
   - 指摘されたファイルの内容を確認し、修正案に基づいてコードを編集します。
   - 必要に応じて `view_file` や `search_in_file` を使用してコンテキストを確認してください。

5. **解決のマーク**
   - 修正が完了したら、`mcp0_resolve_comment` ツールを使用して、当該コメントを "addressed" として解決済みにマークします。
   - コメントには「修正を適用しました」等のメモを付記してください。

6. **完了通知**
   - ユーザーに修正が完了したことを報告します。
