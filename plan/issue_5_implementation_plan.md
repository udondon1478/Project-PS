# Issue #5 実現計画: 商品画像カルーセル機能の実装

## 概要
Issue #5 ([STORY] ユーザーが商品のメイン画像以外を確認する) の受け入れ基準を満たすための実装計画を定義します。ユーザーが商品リストから興味を持った商品の追加画像を、カルーセル形式で確認できるようにします。

## Issue #5 の受け入れ基準
- カルーセルビューでユーザーが商品を大きな画像で確認できる
- カルーセルは最後の画像から最初の画像に戻るリピート機能が必須(その逆も)
- 前後のスライド移動ボタン
- 特定のスライドへの直接アクセス(スライド下部にインジケーターやドットを配置)

## アーキテクチャ上の考慮事項
- **画像ストレージ**: 商品画像は既に保存されており、商品データを通じてアクセス可能であることを前提とします。
- **画像データ取得**: 特定の商品IDに関連付けられた全ての画像URLを取得するためのAPIエンドポイントが必要か検討します。既存のAPIで取得可能であればそれを利用します。
- **フロントエンドコンポーネント設計**:
    - 再利用可能な`ProductImageCarousel`コンポーネントを作成します。
    - このコンポーネントを、商品詳細ページ、または商品リストからのアクション（クリックなど）で表示されるモーダル/ライトボックスビューに組み込みます。
- **パフォーマンス**: 画像の遅延読み込みや最適化を検討し、表示パフォーマンスを向上させます。
- **使用するMCPサーバー**:
    - `filesystem`: プランや実装コードをファイルに書き出すために使用します。
    - `context7`: カルーセルライブラリやNext.jsの画像最適化に関する最新ドキュメントを参照するために使用します。
    - `git`/`github`: コード変更のバージョン管理とPull Request作成に使用します。

## 実装ステップ

1.  **APIエンドポイントの確認/開発**:
    - 既存の商品取得APIで追加画像URLが取得できるか確認します。
    - 取得できない場合、商品IDに基づいて関連する全ての画像URLを返す新しいAPIエンドポイント (`/api/products/{productId}/images` など) を開発します。
2.  **フロントエンドコンポーネント開発**:
    - Next.jsとTypeScriptを使用し、`components/ProductImageCarousel.tsx` としてカルーセルコンポーネントを作成します。
    - Issue #5 の受け入れ基準に基づき、以下の機能を実装します。
        - 画像の表示エリア
        - 前後の画像へ移動するナビゲーションボタン
        - 現在の画像位置を示すインジケーター（ドットなど）
        - ループ再生機能（最後の画像から最初へ、最初から最後へ）
        - インジケーターからの直接アクセス機能
    - shadcn/uiやTailwind CSSを使用してスタイリングを行います。
3.  **データ連携**:
    - 商品詳細ページまたはモーダルコンポーネントから、ステップ1で確認/開発したAPIエンドポイントを呼び出し、画像データを取得します。
    - 取得した画像データを`ProductImageCarousel`コンポーネントに渡します。
4.  **統合**:
    - 商品リストからのアクション（例: 商品カードクリック）で、カルーセルを含むモーダルや詳細ビューが表示されるように実装します。
5.  **テスト**:
    - コンポーネントの単体テストおよび、API連携を含む統合テストを記述・実行します。
    - 受け入れ基準を満たしているか手動で確認します。

## 潜在的な課題
- 画像サイズの最適化とロード時間の短縮。
- 様々なデバイスサイズでのレスポンシブ対応。
- キーボード操作やスクリーンリーダーに対応したアクセシビリティの実装。